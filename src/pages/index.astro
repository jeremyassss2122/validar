---
import Layout from '../layouts/Layout.astro';

import Event from '../components/Event.astro';


// TODO: Add auth to endpoints
// TODO: Add view for invalid invitationID or empty invitation
// TODO: Fix itinerario view
// TODO: Fix contact view
// TODO: Better modal
// TODO: Add gifts table
// TODO: Add movil view
// TODO: Images are refresh many times
// TODO: Mejorar estilo al confirmar o al tener error de confirmación
---

<script>
	const countDownDate = new Date("Dec 13, 2025 12:00:00").getTime();
    const updateCountdown = () => {
        const now = new Date().getTime();
        const distance = countDownDate - now;
        const days = Math.floor(distance / (1000 * 60 * 60 * 24));
        const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((distance % (1000 * 60)) / 1000);
        const daysElement = document.getElementById("days");
        const hoursElement = document.getElementById("hours");
        const minutesElement = document.getElementById("minutes");
        const secondsElement = document.getElementById("seconds");

        if (daysElement) daysElement.innerHTML = days.toString();
        if (hoursElement) hoursElement.innerHTML = hours.toString();
        if (minutesElement) minutesElement.innerHTML = minutes.toString();
        if (secondsElement) secondsElement.innerHTML = seconds.toString();
        if (distance < 0) {
            clearInterval(x);
            if (daysElement) daysElement.innerHTML = "EXPIRED";
        }
    };

    const x = setInterval(updateCountdown, 1000);
</script>

<Layout>
	<main class="text-white">
		<!-- Counter -->
		<section class="h-screen flex flex-col">
			<div class="text-black flex flex-col justify-center grow relative">
				<div class="w-full h-full absolute bg-cover bg-center" style="background-image: url('/images/wedding.jpg');"></div>
				<div class="w-full h-full absolute bg-cover bg-center" style="background-color: rgba(217, 217, 217, 0.45);"></div>
				<h3 class="text-6xl text-center relative">MIS XV AÑOS!</h3>
				<h1 class="text-[50px] text-center relative max-sm:text-[30px]">Melany Gabriela Martinez Ramirez</h1>
			</div>
			<div class="py-5">
				<p class="text-2xl text-center">Tenemos el honor de invitarles a presenciar mis 15 años...</p>
			</div>
			<div class="bg-[#2A2A2A] py-4">
				<p class="text-3xl text-center">13 de Diciembre del 2025</p>
				<div class="w-full flex flex-row justify-around">
					<div class="flex flex-col items-center space-y-3">
						<p id="days" class="text-5xl">000</p>
						<p class="text-xl">días</p>
					</div>
					<div class="flex flex-col items-center space-y-3">
						<p id="hours" class="text-5xl">00</p>
						<p class="text-xl">horas</p>
					</div>
					<div class="flex flex-col items-center space-y-3">
						<p id="minutes" class="text-5xl">00</p>
						<p class="text-xl">minutos</p>
					</div>
					<div class="flex flex-col items-center space-y-3">
						<p id="seconds" class="text-5xl">00</p>
						<p class="text-xl">segundos</p>
					</div>
				</div>
			</div>
		</section>

		<!-- Intinerary -->
		<section class="py-7 flex flex-col space-y-4 px-14 items-center xl:px-80">
			<Event 
				title="Ceremonia religiosa"
				iconLink="/icons/church.svg"
				iconAlt="church"
				time="12:30AM"
				description="Ceremonia religiosa"
				address="Av. Montevideo 323, Lindavista, Gustavo A. Madero, 07300 Ciudad de México, CDMX, México."
				addressLink="https://maps.app.goo.gl/hxLtKei2CrEwEcNt8"
				addressRef="Ubicación iglesia"
				class="md:self-end"
			/>
			<Event 
				title="Recepción"
				iconLink="/icons/deskbell.svg"
				iconAlt="deskbell"
				time="14:00"
				description="Recepción"
				address="Calz. Sta. Ana 111, Siete Maravillas, Gustavo A. Madero, 07708 Ciudad de México, CDMX, México."
				addressLink="https://maps.app.goo.gl/i5t9ztgYYYr2eMNXA"
				addressRef="Ubicación recepción"
				class="md:self-start"
			/>
			<Event 
				title="Celebración"
				iconLink="/icons/mask.svg"
				iconAlt="mask"
				time="14:30"
				description="Celebración"
				address="Calz. Sta. Ana 111, Siete Maravillas, Gustavo A. Madero, 07708 Ciudad de México, CDMX, México."
				addressLink="https://maps.app.goo.gl/i5t9ztgYYYr2eMNXA"
				addressRef="Ubicación celebración"
				class="md:self-end"
			/>
		</section>
		<!-- Dress code -->
		<section class="py-7 bg-[#2A2A2A] text-white text-center space-y-6 px-14">
			<h2 class="text-4xl">Código de Vestimenta</h2>
			<p class="font-light md:text-2xl">Código de vestimenta: formal. Agradecemos que eviten los siguientes colores en el evento.</p>
			<p class="text-lg font-bold text-yellow-300">COLORES PROHIBIDOS!</p>
			<div class="flex flex-row justify-center space-x-10">
				<div class="flex flex-col space-y-2 items-center">
					<div class="rounded-full w-12 h-12 bg-[#0000FF] min-[700px]:w-16 min-[700px]:h-16" />
					<p>Azul Marino</p>
				</div>
			</div>
		</section>

		<!-- Gallery -->
		<section class="grid grid-cols-5 max-[500px]:grid-cols-1">
			<div class="aspect-square overflow-hidden">
				<img src="/images/wedding_1.jpg" alt="novios_1" class="object-cover w-full h-full" />
			</div>
			<div class="aspect-square overflow-hidden">
				<img src="/images/wedding_2.jpg" alt="novios_1" class="object-cover w-full h-full" />
			</div>
			<div class="aspect-square overflow-hidden">
				<img src="/images/wedding_3.jpg" alt="novios_1" class="object-cover w-full h-full" />
			</div>
			<div class="aspect-square overflow-hidden">
				<img src="/images/wedding_4.jpg" alt="novios_1" class="object-cover w-full h-full" />
			</div>
			<div class="aspect-square overflow-hidden">
				<img src="/images/wedding_5.jpg" alt="novios_1" class="object-cover w-full h-full" />
			</div>
		</section>

		<!-- Presents -->
		<section class="py-7 bg-[#2A2A2A] flex flex-col items-center px-14">
			<h2 class="text-4xl">Regalos</h2>
			<p class="text-center my-3 md:text-2xl">Si deseas hacer un regalo, puedes entrar a nuestra mesa de regalos en Amazon, Liverpool o llevarlo el día del evento (no contamos con lista de regalos). Recuerda que tu presencia es lo más importante para nosotros.</p>
			<p class="text-xl text-center">Mesa: Amazon</p>
			<p class="text-md text-center my-1 md:text-lg">Código de mesa: XYAWJ7BV8RKV</p>
			<a class="text-md md:text-lg underline text-center" href="https://www.amazon.com.mx/wedding/registry/XYAWJ7BV8RKV" target="_blank" class="text-center underline">Ir a mesa de regalos</a>
			<hr class="my-5" />
			<p class="text-xl text-center">Mesa: Liverpool</p>
			<p class="text-md text-center my-1 md:text-lg">Código de mesa: 51605353</p>
			<a class="text-md md:text-lg underline text-center" href="https://mesaderegalos.liverpool.com.mx/milistaderegalos/51605353" target="_blank" class="text-center underline">Ir a mesa de regalos</a>
		</section>

		<!-- Contact info -->
		<section class="py-7 flex flex-col items-center space-y-3 px-3 text-center mb-4">
			<h2 class="text-4xl">Contacto</h2>
			<p class="text-center my-3 md:text-2xl">Si tienes alguna duda o necesitas más información, no dudes en escribirnos.</p>
			<div class="flex flex-col space-y-2">
			  <div class="flex items-center space-x-2">
				<span class="[&>svg]:h-5 [&>svg]:w-5">
					<svg
						xmlns="http://www.w3.org/2000/svg"
						fill="currentColor"
						viewBox="0 0 448 512">
						<path
						d="M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157zm-157 341.6c-33.2 0-65.7-8.9-94-25.7l-6.7-4-69.8 18.3L72 359.2l-4.4-7c-18.5-29.4-28.2-63.3-28.2-98.2 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1 34.8 34.9 56.2 81.2 56.1 130.5 0 101.8-84.9 184.6-186.6 184.6zm101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8-3.7 5.6-14.3 18-17.6 21.8-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7 .9-6.9-.5-9.7-1.4-2.8-12.5-30.1-17.1-41.2-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2-3.7 0-9.7 1.4-14.8 6.9-5.1 5.6-19.4 19-19.4 46.3 0 27.3 19.9 53.7 22.6 57.4 2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4 4.6-13 4.6-24.1 3.2-26.4-1.3-2.5-5-3.9-10.5-6.6z" />
					</svg>
				</span>
				<a href="https://wa.me/5539604596?text=¡Hola! Me gustaría saber más sobre la boda" target="_blank" class="underline text-md md:text-lg">Contacto de Papá</a>
			  </div>
			  <div class="flex items-center space-x-2">
				<span class="[&>svg]:h-5 [&>svg]:w-5">
				<svg
					xmlns="http://www.w3.org/2000/svg"
					fill="currentColor"
					viewBox="0 0 448 512">
					<path
					d="M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157zm-157 341.6c-33.2 0-65.7-8.9-94-25.7l-6.7-4-69.8 18.3L72 359.2l-4.4-7c-18.5-29.4-28.2-63.3-28.2-98.2 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1 34.8 34.9 56.2 81.2 56.1 130.5 0 101.8-84.9 184.6-186.6 184.6zm101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8-3.7 5.6-14.3 18-17.6 21.8-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7 .9-6.9-.5-9.7-1.4-2.8-12.5-30.1-17.1-41.2-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2-3.7 0-9.7 1.4-14.8 6.9-5.1 5.6-19.4 19-19.4 46.3 0 27.3 19.9 53.7 22.6 57.4 2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4 4.6-13 4.6-24.1 3.2-26.4-1.3-2.5-5-3.9-10.5-6.6z" />
				</svg>
				</span>
				<a href="https://wa.me/5579788522?text=¡Hola! Me gustaría saber más sobre la boda" target="_blank" class="underline text-md md:text-lg">Contacto de Mamá </a>
			  </div>
			</div>
		</section>
		  
	</main>
</Layout>
